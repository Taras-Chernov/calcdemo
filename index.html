<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конфигуратор серверных мощностей</title>
    <style>
        /* Базовые стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #0c1a2d;
            color: #fff;
            line-height: 1.6;
        }

        .wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .order {
            padding: 20px 0;
        }

        .configurator-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            padding: 20px 0;
            align-items: flex-start;
        }

        @media (max-width: 968px) {
            .configurator-container {
                flex-direction: column;
            }
        }

        .configurator-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .configurator-header h2 {
            font-size: 1.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .selection-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
        }

        h3 {
            color: #00c6ff;
        }

        /* Стили для процессоров */
        .processor-options {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .processor-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .processor-option.selected {
            border-color: #00c6ff;
            background: rgba(0, 198, 255, 0.1);
        }

        .processor-option:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Стили для типа CPU */
        .cpu-type-options {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cpu-type-option {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .cpu-type-option.selected {
            border-color: #00c6ff;
            background: rgba(0, 198, 255, 0.1);
        }

        .cpu-type-option:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .cpu-type-price {
            color: #00c6ff;
            font-weight: bold;
        }

        /* Стили для конфигурационных элементов */
        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .config-label {
            font-weight: bold;
            flex: 1;
            max-width: 15%;
        }

        .config-value {
            color: #00c6ff;
            margin: 0 15px;
            min-width: 60px;
            text-align: center;
        }

        .config-price {
            color: #00c6ff;
            font-weight: bold;
            min-width: 100px;
            text-align: right;
        }

        .config-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
            max-width: 100%;
        }

        .slider-block {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .range-slider {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #00c6ff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .range-slider::-webkit-slider-thumb:hover {
            background: #0072ff;
            transform: scale(1.1);
        }

        .range-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #00c6ff;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .range-slider::-moz-range-thumb:hover {
            background: #0072ff;
            transform: scale(1.1);
        }

        .slider-value {
            color: #00c6ff;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
        }

        .cores-section {
            margin: 25px 0;
        }

        /* Стили для хранилищ */
        .storage-container {
            margin-bottom: 20px;
        }

        .storage-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .storage-title {
            font-weight: bold;
            color: #00c6ff;
        }

        .remove-storage {
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .remove-storage:hover {
            background: #ff0000;
            transform: scale(1.1);
        }

        .storage-options-server {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin: 20px 0;
        }

        .storage-select-container {
            display: flex;
            gap: 15px;
        }

        .storage-option-server {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .storage-option-server.selected {
            border-color: #00c6ff;
            background: rgba(0, 198, 255, 0.1);
        }

        .storage-option-server:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .storage-price {
            color: #00c6ff;
            font-weight: bold;
        }

        /* Стили для кнопки добавления хранилища */
        .add-storage-btn {
            background: rgba(0, 198, 255, 0.2);
            color: #00c6ff;
            border: 2px dashed #00c6ff;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            margin: 20px 0;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .add-storage-btn:hover {
            background: rgba(0, 198, 255, 0.3);
            transform: translateY(-2px);
        }

        .add-storage-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.5);
        }

        .add-storage-btn.disabled:hover {
            transform: none;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Стили для резервного копирования серверных мощностей */
        .backup-options-server {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            margin: 20px 0;
        }

        .backup-select-conteiner {
            display: flex;
            gap: 15px
        }

        .backup-option-server {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .backup-option-server.selected {
            border-color: #00c6ff;
            background: rgba(0, 198, 255, 0.1);
        }

        .backup-option-server:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .backup-name {
            font-weight: 500;
        }

        .backup-price {
            color: #00c6ff;
            font-weight: 600;
        }

        /* Стили для хранилища дискового пространства */
        .storage-options-disk {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin: 20px 0;
        }

        .storage-select-conteiner {
            display: flex;
            gap:15px
        }

        .storage-option-disk {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .storage-option-disk.selected {
            border-color: #00c6ff;
            background: rgba(0, 198, 255, 0.1);
        }

        .storage-option-disk:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Стили для резервного копирования дискового пространства */
        .backup-options-disk {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin: 20px 0;
        }

        .backup-option-disk {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .backup-option-disk.selected {
            border-color: #00c6ff;
            background: rgba(0, 198, 255, 0.1);
        }

        .backup-option-disk:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Стили для итоговой секции */
        .total-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            text-align: center;
        }

        .total-price {
            font-size: clamp(1rem, 2vw, 1.8rem);
            line-height: 2rem;
            font-weight: 700;
            color: #00c6ff;
            margin: 15px 0;
        }

        .order-btn {
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 198, 255, 0.3);
        }

        /* Стили для модальных окон */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #00c6ff;
        }

        .modal-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #0c1a2d;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: #ff4444;
        }

        .order-summary {
            background: rgba(0, 198, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2em;
            font-weight: bold;
            padding: 15px 0 0 0;
            border-top: 2px solid #00c6ff;
            margin-top: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #00c6ff;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .submit-order {
            width: 100%;
            background: linear-gradient(45deg, #00c6ff, #0072ff);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .submit-order:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 198, 255, 0.3);
        }
    </style>
</head>
<body>
    <section class="order">
        <div class="wrapper">
            <!-- КОНФИГУРАТОР СЕРВЕРНЫХ МОЩНОСТЕЙ -->
            <div class="configurator-header" id="configurator-server">
                <h2 id="configurator">КОНФИГУРАТОР СЕРВЕРНЫХ МОЩНОСТЕЙ</h2>
            </div>
            <div class="configurator-container">
                <!-- Левый столбец - Выбор конфигурации -->
                <div class="selection-section"> 
                    <div class="processor-options">
                        <h3 class="processor-title">Процессор:</h3>
                        <div class="processor-option selected" data-processor="xeon-gold">
                            <div class="processor-name"><span>Xeon Gold 6244 2933MHz</span></div>
                        </div>
                        <div class="cpu-type-options">
                        <h3>Тип CPU:</h3>
                        <div class="cpu-type-option selected" data-cpu-type="vcpu" data-price="250">
                            <div><span>vCPU</span></div>
                            <div class="cpu-type-price"><span>250 ₽/ядро</span></div>
                        </div>
                        <div class="cpu-type-option" data-cpu-type="full-cpu" data-price="2000">
                            <div><span>100% CPU</span></div>
                            <div class="cpu-type-price"><span>2 000 ₽/ядро</span></div>
                        </div>
                    </div>
                    </div>
                    

                    <div class="cores-section">
                        <div class="config-item">
                            <div class="config-label"><span>Ядра</span></div>
                            <div class="config-controls">
                                <div class="slider-block">
                                    <input type="range" class="range-slider" id="coresSlider" min="2" max="32" step="2" value="2">
                                    <span class="slider-value" id="coresValue">2 ядер</span>
                                </div>
                            </div>
                            <div class="config-price"><span id="coresPrice">500 ₽/мес</span></div>
                        </div>
                    </div>
                    <div class="config-item">
                        <div class="config-label"><span id="ramLabel">Память</span></div>
                        <div class="config-controls">
                            <div class="slider-block">
                                <input type="range" class="range-slider" id="ramSlider" min="4" max="512" step="4" value="4">
                                <span class="slider-value" id="ramValue">4 ГБ</span>
                            </div>
                        </div>
                        <div class="config-price"><span id="ramPrice">1 000 ₽/мес</span></div>
                    </div>
                    
                    <!-- Контейнер для динамически добавляемых хранилищ -->
                    <div id="storagesContainer">
                        <!-- Хранилище 1 (базовое) -->
                        <div class="storage-container" data-storage-id="1">
                            <div class="storage-header">
                                <div class="storage-title">Хранилище 1</div>
                                <button class="remove-storage" style="display: none;">×</button>
                            </div>
                            <div class="config-item">
                                <div class="config-label"><span>Объем</span></div>
                                <div class="config-controls">
                                    <div class="slider-block">
                                        <input type="range" class="range-slider storage-slider" data-storage-id="1" min="10" max="2000" step="10" value="10">
                                        <span class="slider-value storage-value" data-storage-id="1">10 ГБ</span>
                                    </div>
                                </div>
                                <div class="config-price"><span class="storage-price" data-storage-id="1">120 ₽/мес</span></div>
                            </div>
                            <div class="storage-options-server">
                                <h3>Тип хранилища:</h3>
                                <div class="storage-select-container">
                                    <div class="storage-option-server selected" data-type="nvme" data-price="12" data-storage-id="1">
                                        <div><span>NVMe 200k IOPS</span></div>
                                        <div class="storage-price"><span>12 ₽/ГБ</span></div>
                                    </div>
                                    <div class="storage-option-server" data-type="sas" data-price="6" data-storage-id="1">
                                        <div><span>SAS 10k IOPS</span></div>
                                        <div class="storage-price"><span>6 ₽/ГБ</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Кнопка добавления хранилища -->
                    <div class="add-storage-btn" id="addStorageBtn">
                        + Добавить хранилище
                    </div>

                    
                    <div class="backup-options-server">
                        <h3 class="backup-title-server">Резервное копирование:</h3>
                        <div class="backup-select-conteiner">
                            <div class="backup-option-server selected" data-backup="7days" data-multiplier="1">
                                <div class="backup-name"><span>7 дней</span></div>
                                <div class="backup-price"><span>включено</span></div>
                            </div>
                            <div class="backup-option-server" data-backup="14days" data-multiplier="1.25">
                                <div class="backup-name"><span>14 дней</span></div>
                                <div class="backup-price"><span>x1.25</span></div>
                            </div>
                            <div class="backup-option-server" data-backup="30days" data-multiplier="1.5">
                                <div class="backup-name"><span>30 дней</span></div>
                                <div class="backup-price"><span>x1.5</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Итоговая секция для серверных мощностей -->
                    <div class="total-section">
                        <h3>Итого в месяц:</h3>
                        <div class="total-price" id="totalPrice"><span>1 620 ₽/мес</span></div>
                        <button class="order-btn" id="orderBtn">Заказать мощности</button>
                    </div>
                </div>
            </div>

            <!-- Модальное окно заказа -->
            <div class="modal-overlay" id="modalOverlay">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="modal-title">Ваш заказ серверных мощностей</div>
                        <button class="close-modal" id="closeModal">×</button>
                    </div>
                    
                    <div class="order-summary" id="orderSummary">
                        <!-- Содержимое будет заполнено динамически -->
                    </div>

                    <form id="orderForm">
                        <div class="form-group">
                            <label for="userName">Ваше имя *</label>
                            <input type="text" id="userName" required placeholder="Иван Иванов">
                        </div>
                        <div class="form-group">
                            <label for="userEmail">Email *</label>
                            <input type="email" id="userEmail" required placeholder="ivan@example.com">
                        </div>
                        <div class="form-group">
                            <label for="userPhone">Телефон *</label>
                            <input type="tel" id="userPhone" required placeholder="+7 (999) 999-99-99">
                        </div>
                        <div class="form-group">
                            <label for="userComment">Комментарий к заказу</label>
                            <textarea id="userComment" placeholder="Дополнительные пожелания или требования"></textarea>
                        </div>
                        
                        <button type="submit" class="submit-order">Отправить заказ</button>
                    </form>
                </div>
            </div>      
            
            <!-- КОНФИГУРАТОР ДИСКОВОГО ПРОСТРАНСТВА -->
            <div class="configurator-header">
                <h2>КОНФИГУРАТОР ДИСКОВОГО ПРОСТРАНСТВА</h2>
            </div>    
            <div class="configurator-container" id="config-disk">
                <!-- Левый столбец - Выбор конфигурации -->
                <div class="selection-section">
                    
                    <div class="storage-options-disk">
                        <h3>Тип хранилища:</h3>
                        <div class="storage-select-conteiner">
                            <div class="storage-option-disk selected" data-type="nvme" data-price="12">
                                <div><span>NVMe 200k IOPS</span></div>
                                <div class="storage-price"><span>12 ₽/ГБ</span></div>
                            </div>
                            <div class="storage-option-disk" data-type="sas" data-price="6">
                                <div><span>SAS 10k IOPS</span></div>
                                <div class="storage-price"><span>6 ₽/ГБ</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="config-item">
                        <div class="config-label"><span>Объем:</span></div>
                        <div class="config-controls">
                            <div class="slider-block">
                                <input type="range" class="range-slider" id="storageSpaceSlider" min="10" max="2000" step="10" value="10">
                                <span class="slider-value" id="storageSpaceValue">10 ГБ</span>
                            </div>
                        </div>
                        <div class="config-price"><span id="storageSpacePrice">120 ₽/мес</span></div>
                    </div>

                    
                    <div class="backup-options-disk">
                        <h3 class="backup-title-disk">Резервное копирование:</h3>
                        <div class="backup-select-conteiner">
                            <div class="backup-option-disk selected" data-backup="7days" data-multiplier="1">
                                <div class="backup-name"><span>7 дней</span></div>
                                <div class="backup-price"><span>включено</span></div>
                            </div>
                            <div class="backup-option-disk" data-backup="14days" data-multiplier="1.25">
                                <div class="backup-name"><span>14 дней</span></div>
                                <div class="backup-price"><span>x1.25</span></div>
                            </div>
                            <div class="backup-option-disk" data-backup="30days" data-multiplier="1.5">
                                <div class="backup-name"><span>30 дней</span></div>
                                <div class="backup-price"><span>x1.5</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Итоговая секция для дискового пространства -->
                    <div class="total-section">
                        <h3>ИТОГО В МЕСЯЦ:</h3>
                        <div class="total-price" id="totalStoragePrice"><span>120 ₽/мес</span></div>
                        <button class="order-btn" id="orderStorageBtn">Заказать хранилище</button>
                    </div>
                </div>
            </div>

            <!-- Модальное окно для заказа хранилища -->
            <div class="modal-overlay" id="storageModalOverlay">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="modal-title">Ваш заказ дискового пространства</div>
                        <button class="close-modal" id="closeStorageModal">×</button>
                    </div>
                    
                    <div class="order-summary">
                        <div class="order-item">
                            <span>Тип хранилища:</span>
                            <span id="orderStorageType">NVMe 200k IOPS</span>
                        </div>
                        <div class="order-item">
                            <span>Объем:</span>
                            <span id="orderStorageSpace">10 ГБ</span>
                        </div>
                        <div class="order-item">
                            <span>Резервное копирование:</span>
                            <span id="orderBackup">7 дней</span>
                        </div>
                        <div class="order-total">
                            <span>Итого в месяц:</span>
                            <span id="orderStorageTotal">120 ₽/мес</span>
                        </div>
                    </div>

                    <form id="storageOrderForm">
                        <div class="form-group">
                            <label for="storageUserName">Ваше имя *</label>
                            <input type="text" id="storageUserName" required placeholder="Иван Иванов">
                        </div>
                        <div class="form-group">
                            <label for="storageUserEmail">Email *</label>
                            <input type="email" id="storageUserEmail" required placeholder="ivan@example.com">
                        </div>
                        <div class="form-group">
                            <label for="storageUserPhone">Телефон *</label>
                            <input type="tel" id="storageUserPhone" required placeholder="+7 (999) 999-99-99">
                        </div>
                        <div class="form-group">
                            <label for="storageUserComment">Комментарий к заказу</label>
                            <textarea id="storageUserComment" placeholder="Дополнительные пожелания или требования"></textarea>
                        </div>
                        
                        <button type="submit" class="submit-order">Отправить заказ</button>
                    </form>
                </div>
            </div>
        </div>      
    </section>

    <script>
        // Базовая конфигурация серверных мощностей
        let config = {
            processor: 'xeon-gold',
            cpuType: 'vcpu',
            cpuPrice: 250,
            cores: 2,
            ram: 4,
            storages: [
                {
                    id: 1,
                    size: 10,
                    type: 'nvme',
                    price: 12
                }
            ],
            backup: '7days',
            backupMultiplier: 1
        };

        // Базовая конфигурация дискового пространства
        let storageConfig = {
            storageType: 'nvme',
            storagePrice: 12,
            storageSpace: 10,
            backup: '7days',
            backupMultiplier: 1
        };

        // Максимальное количество хранилищ
        const MAX_STORAGES = 4;

        // Функция расчета стоимости RAM в зависимости от типа CPU и объема
        function calculateRamPrice(ramGB, cpuType) {
            if (cpuType === 'full-cpu') {
                return ramGB * 40; // 40 руб/ГБ для 100% CPU
            } else {
                // vCPU: до 32ГБ - 250р, 32-64ГБ - 220р, свыше 64ГБ - 200р
                if (ramGB <= 32) {
                    return ramGB * 250;
                } else if (ramGB <= 64) {
                    return ramGB * 220;
                } else {
                    return ramGB * 200;
                }
            }
        }

        // Функция расчета стоимости процессоров
        function calculateCoresPrice(cores, cpuPrice) {
            return cores * cpuPrice;
        }

        // Функция получения максимального объема RAM (16 ГБ на ядро)
        function getMaxRam(cores) {
            return cores * 16; // Максимум 16 ГБ на ядро для обоих типов CPU
        }

        // Функция получения минимального объема RAM (4 ГБ для обоих типов)
        function getMinRam() {
            return 4; // Минимум 4 ГБ для обоих типов CPU
        }

        // Функция расчета общей стоимости серверных мощностей
        function calculateTotal() {
            const coresCost = calculateCoresPrice(config.cores, config.cpuPrice);
            const ramCost = calculateRamPrice(config.ram, config.cpuType);
            
            let storageCost = 0;
            config.storages.forEach(storage => {
                storageCost += storage.price * storage.size * config.backupMultiplier;
            });
            
            const total = coresCost + ramCost + storageCost;
            return total;
        }

        // Функция расчета стоимости хранилища
        function calculateStorageTotal() {
            const storageCost = storageConfig.storagePrice * storageConfig.storageSpace * storageConfig.backupMultiplier;
            return storageCost;
        }

        // Вспомогательные функции
        function getBackupName(type) {
            const backups = {
                '7days': '7 дней',
                '14days': '14 дней',
                '30days': '30 дней'
            };
            return backups[type];
        }

        // Обновление ограничений памяти при изменении количества ядер
        function updateRamLimits() {
            const maxRam = getMaxRam(config.cores);
            const minRam = getMinRam();
            
            // Обновляем ползунок памяти
            document.getElementById('ramSlider').max = maxRam;
            document.getElementById('ramSlider').min = minRam;
            
            // Если текущее значение памяти превышает новый максимум, уменьшаем его
            if (config.ram > maxRam) {
                config.ram = maxRam;
                document.getElementById('ramSlider').value = maxRam;
                document.getElementById('ramValue').textContent = maxRam + ' ГБ';
            }
            
            // Если текущее значение памяти меньше нового минимума, увеличиваем его
            if (config.ram < minRam) {
                config.ram = minRam;
                document.getElementById('ramSlider').value = minRam;
                document.getElementById('ramValue').textContent = minRam + ' ГБ';
            }
        }

        // Обновление отображения серверных мощностей
        function updateDisplay() {
            // Обновляем цены в левой колонке
            const coresCost = calculateCoresPrice(config.cores, config.cpuPrice);
            const ramCost = calculateRamPrice(config.ram, config.cpuType);
            
            document.getElementById('coresPrice').textContent = coresCost + ' ₽/мес';
            document.getElementById('ramPrice').textContent = ramCost + ' ₽/мес';
            
            // Обновляем цены для каждого хранилища
            config.storages.forEach(storage => {
                const storageCost = storage.price * storage.size * config.backupMultiplier;
                document.querySelector(`.storage-price[data-storage-id="${storage.id}"]`).textContent = Math.round(storageCost) + ' ₽/мес';
            });
            
            // Обновляем общую стоимость
            const total = calculateTotal();
            document.getElementById('totalPrice').textContent = Math.round(total).toLocaleString('ru-RU') + ' ₽/мес';
        }

        // Обновление отображения хранилища
        function updateStorageDisplay() {
            const totalStorageCost = storageConfig.storagePrice * storageConfig.storageSpace * storageConfig.backupMultiplier;
            
            document.getElementById('storageSpacePrice').textContent = Math.round(totalStorageCost) + ' ₽/мес';
            
            const total = calculateStorageTotal();
            document.getElementById('totalStoragePrice').textContent = Math.round(total).toLocaleString('ru-RU') + ' ₽/мес';
        }

        // Функция добавления нового хранилища
        function addStorage() {
            if (config.storages.length >= MAX_STORAGES) {
                return;
            }
            
            const newStorageId = config.storages.length + 1;
            
            // Создаем новый объект хранилища
            const newStorage = {
                id: newStorageId,
                size: 10,
                type: 'nvme',
                price: 12
            };
            
            config.storages.push(newStorage);
            
            // Создаем HTML для нового хранилища
            const storageHTML = `
                <div class="storage-container" data-storage-id="${newStorageId}">
                    <div class="storage-header">
                        <div class="storage-title">Хранилище ${newStorageId}</div>
                        <button class="remove-storage">×</button>
                    </div>
                    <div class="config-item">
                        <div class="config-label"><span>Объем</span></div>
                        <div class="config-controls">
                            <div class="slider-block">
                                <input type="range" class="range-slider storage-slider" data-storage-id="${newStorageId}" min="10" max="2000" step="10" value="10">
                                <span class="slider-value storage-value" data-storage-id="${newStorageId}">10 ГБ</span>
                            </div>
                        </div>
                        <div class="config-price"><span class="storage-price" data-storage-id="${newStorageId}">120 ₽/мес</span></div>
                    </div>
                    <div class="storage-options-server">
                        <h3>Тип хранилища:</h3>
                        <div class="storage-select-container">
                            <div class="storage-option-server selected" data-type="nvme" data-price="12" data-storage-id="${newStorageId}">
                                <div><span>NVMe 200k IOPS</span></div>
                                <div class="storage-price"><span>12 ₽/ГБ</span></div>
                            </div>
                            <div class="storage-option-server" data-type="sas" data-price="6" data-storage-id="${newStorageId}">
                                <div><span>SAS 10k IOPS</span></div>
                                <div class="storage-price"><span>6 ₽/ГБ</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Вставляем новое хранилище перед кнопкой добавления
            document.getElementById('addStorageBtn').insertAdjacentHTML('beforebegin', storageHTML);
            
            // Добавляем обработчики событий для нового хранилища
            addStorageEventListeners(newStorageId);
            
            // Обновляем состояние кнопки добавления
            updateAddStorageButton();
            
            // Обновляем отображение
            updateDisplay();
        }

        // Функция удаления хранилища
        function removeStorage(storageId) {
            if (storageId === 1) {
                // Не удаляем первое хранилище, просто сбрасываем его
                const storage = config.storages.find(s => s.id === storageId);
                storage.size = 10;
                storage.type = 'nvme';
                storage.price = 12;
                
                // Сбрасываем UI
                document.querySelector(`.storage-slider[data-storage-id="${storageId}"]`).value = 10;
                document.querySelector(`.storage-value[data-storage-id="${storageId}"]`).textContent = '10 ГБ';
                
                // Сбрасываем тип хранилища
                document.querySelectorAll(`.storage-option-server[data-storage-id="${storageId}"]`).forEach(opt => {
                    opt.classList.remove('selected');
                });
                document.querySelector(`.storage-option-server[data-storage-id="${storageId}"][data-type="nvme"]`).classList.add('selected');
                
                // Скрываем кнопку удаления для первого хранилища
                document.querySelector(`.storage-container[data-storage-id="${storageId}"] .remove-storage`).style.display = 'none';
            } else {
                // Удаляем хранилище из конфигурации
                config.storages = config.storages.filter(s => s.id !== storageId);
                
                // Удаляем HTML элемент
                document.querySelector(`.storage-container[data-storage-id="${storageId}"]`).remove();
                
                // Обновляем состояние кнопки добавления
                updateAddStorageButton();
            }
            
            // Обновляем отображение
            updateDisplay();
        }

        // Функция обновления состояния кнопки добавления хранилища
        function updateAddStorageButton() {
            const addBtn = document.getElementById('addStorageBtn');
            if (config.storages.length >= MAX_STORAGES) {
                addBtn.classList.add('disabled');
            } else {
                addBtn.classList.remove('disabled');
            }
        }

        // Функция добавления обработчиков событий для хранилища
        function addStorageEventListeners(storageId) {
            // Обработчик для ползунка объема хранилища
            document.querySelector(`.storage-slider[data-storage-id="${storageId}"]`).addEventListener('input', function() {
                const storage = config.storages.find(s => s.id === storageId);
                storage.size = parseInt(this.value);
                document.querySelector(`.storage-value[data-storage-id="${storageId}"]`).textContent = storage.size + ' ГБ';
                updateDisplay();
            });
            
            // Обработчики для типа хранилища
            document.querySelectorAll(`.storage-option-server[data-storage-id="${storageId}"]`).forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll(`.storage-option-server[data-storage-id="${storageId}"]`).forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const storage = config.storages.find(s => s.id === storageId);
                    storage.type = this.dataset.type;
                    storage.price = parseInt(this.dataset.price);
                    
                    updateDisplay();
                });
            });
            
            // Обработчик для кнопки удаления хранилища
            document.querySelector(`.storage-container[data-storage-id="${storageId}"] .remove-storage`).addEventListener('click', function() {
                removeStorage(storageId);
            });
        }

        // Обработчики для типа CPU
        document.querySelectorAll('.cpu-type-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.cpu-type-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                config.cpuType = this.dataset.cpuType;
                config.cpuPrice = parseInt(this.dataset.price);
                
                // Одинаковые настройки для обоих типов CPU
                document.getElementById('ramSlider').step = 4; // Шаг 4 ГБ для обоих типов
                
                // Обновляем ограничения для обоих типов CPU
                if (config.cpuType === 'vcpu') {
                    // Максимум 32 ядра для vCPU
                    document.getElementById('coresSlider').max = 32;
                } else {
                    // Для 100% CPU максимум 16 ядер
                    document.getElementById('coresSlider').max = 16;
                    
                    // Если текущие значения превышают лимиты, уменьшаем их
                    if (config.cores > 16) {
                        config.cores = 16;
                        document.getElementById('coresSlider').value = 16;
                        document.getElementById('coresValue').textContent = '16 ядер';
                    }
                }
                
                // Обновляем ограничения памяти
                updateRamLimits();
                updateDisplay();
            });
        });

        // Обработчики для ползунков серверных мощностей
        document.getElementById('coresSlider').addEventListener('input', function() {
            config.cores = parseInt(this.value);
            document.getElementById('coresValue').textContent = config.cores + ' ядер';
            
            // Обновляем ограничения памяти при изменении количества ядер
            updateRamLimits();
            
            updateDisplay();
        });

        document.getElementById('ramSlider').addEventListener('input', function() {
            config.ram = parseInt(this.value);
            document.getElementById('ramValue').textContent = config.ram + ' ГБ';
            updateDisplay();
        });

        // Обработчики для резервного копирования серверных мощностей
        document.querySelectorAll('.backup-option-server').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.backup-option-server').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                config.backup = this.dataset.backup;
                config.backupMultiplier = parseFloat(this.dataset.multiplier);
                updateDisplay();
            });
        });

        // Обработчики для типа хранилища дискового пространства
        document.querySelectorAll('.storage-option-disk').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.storage-option-disk').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                storageConfig.storageType = this.dataset.type;
                storageConfig.storagePrice = parseInt(this.dataset.price);
                updateStorageDisplay();
            });
        });

        // Обработчик для ползунка дискового пространства
        document.getElementById('storageSpaceSlider').addEventListener('input', function() {
            storageConfig.storageSpace = parseInt(this.value);
            document.getElementById('storageSpaceValue').textContent = storageConfig.storageSpace + ' ГБ';
            updateStorageDisplay();
        });

        // Обработчики для резервного копирования дискового пространства
        document.querySelectorAll('.backup-option-disk').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.backup-option-disk').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                storageConfig.backup = this.dataset.backup;
                storageConfig.backupMultiplier = parseFloat(this.dataset.multiplier);
                updateStorageDisplay();
            });
        });

        // Обработчик для кнопки добавления хранилища
        document.getElementById('addStorageBtn').addEventListener('click', function() {
            if (!this.classList.contains('disabled')) {
                addStorage();
            }
        });

        // Модальные окна для серверных мощностей
        const modalOverlay = document.getElementById('modalOverlay');
        const closeModalBtn = document.getElementById('closeModal');
        const orderBtn = document.getElementById('orderBtn');
        const orderForm = document.getElementById('orderForm');

        // Функция обновления модального окна серверных мощностей
        function updateOrderModal() {
            const orderSummary = document.getElementById('orderSummary');
            let summaryHTML = `
                <div class="order-item">
                    <span>Процессор:</span>
                    <span>Xeon Gold 6244</span>
                </div>
                <div class="order-item">
                    <span>Тип CPU:</span>
                    <span>${config.cpuType === 'vcpu' ? 'vCPU' : '100% CPU'}</span>
                </div>
                <div class="order-item">
                    <span>Количество ядер:</span>
                    <span>${config.cores} ядер</span>
                </div>
                <div class="order-item">
                    <span>Оперативная память:</span>
                    <span>${config.ram} ГБ</span>
                </div>
            `;
            
            // Добавляем информацию о хранилищах
            config.storages.forEach(storage => {
                summaryHTML += `
                    <div class="order-item">
                        <span>Хранилище ${storage.id}:</span>
                        <span>${storage.size} ГБ ${storage.type === 'nvme' ? 'NVMe' : 'SAS'}</span>
                    </div>
                `;
            });
            
            summaryHTML += `
                <div class="order-item">
                    <span>Резервное копирование:</span>
                    <span>${getBackupName(config.backup)}</span>
                </div>
                <div class="order-total">
                    <span>Итого в месяц:</span>
                    <span>${Math.round(calculateTotal()).toLocaleString('ru-RU')} ₽/мес</span>
                </div>
            `;
            
            orderSummary.innerHTML = summaryHTML;
        }

        orderBtn.addEventListener('click', function() {
            updateOrderModal();
            modalOverlay.classList.add('active');
        });

        closeModalBtn.addEventListener('click', function() {
            modalOverlay.classList.remove('active');
        });

        modalOverlay.addEventListener('click', function(e) {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
            }
        });

        // Модальные окна для дискового пространства
        const storageModalOverlay = document.getElementById('storageModalOverlay');
        const closeStorageModal = document.getElementById('closeStorageModal');
        const orderStorageBtn = document.getElementById('orderStorageBtn');
        const storageOrderForm = document.getElementById('storageOrderForm');

        // Функция обновления модального окна дискового пространства
        function updateStorageOrderModal() {
            document.getElementById('orderStorageType').textContent = storageConfig.storageType === 'nvme' ? 'NVMe 200k IOPS' : 'SAS 10K';
            document.getElementById('orderStorageSpace').textContent = storageConfig.storageSpace + ' ГБ';
            document.getElementById('orderBackup').textContent = getBackupName(storageConfig.backup);
            document.getElementById('orderStorageTotal').textContent = Math.round(calculateStorageTotal()).toLocaleString('ru-RU') + ' ₽/мес';
        }

        orderStorageBtn.addEventListener('click', function() {
            updateStorageOrderModal();
            storageModalOverlay.classList.add('active');
        });

        closeStorageModal.addEventListener('click', function() {
            storageModalOverlay.classList.remove('active');
        });

        storageModalOverlay.addEventListener('click', function(e) {
            if (e.target === storageModalOverlay) {
                storageModalOverlay.classList.remove('active');
            }
        });

        // Обработчики форм
        orderForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Заказ серверных мощностей отправлен! Мы свяжемся с вами в ближайшее время.');
            modalOverlay.classList.remove('active');
            orderForm.reset();
        });

        storageOrderForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Заказ дискового пространства отправлен! Мы свяжемся с вами в ближайшее время.');
            storageModalOverlay.classList.remove('active');
            storageOrderForm.reset();
        });

        // Инициализация
        function init() {
            updateRamLimits();
            updateDisplay();
            updateStorageDisplay();
            updateAddStorageButton();
            
            // Добавляем обработчики для первого хранилища
            addStorageEventListeners(1);
        }

        init();
    </script>
</body>
</html>